package @@package@@

import io.circe.generic.auto._
import io.finch.circe._
import com.twitter.finagle.Service
import com.twitter.finagle.http.{Request, Response}
import maiden.api.v1.ErrorHandler.apiErrorHandler
import maiden.config.Config.apiAuthenticationCredentials
import maiden.http.{ExceptionFilter, HawkAuthenticateRequestFilter, RequestLoggingFilter}
import maiden.util.error.ErrorResponseEncoders
import @@package@@.api._

object AuthenticationFilter extends HawkAuthenticateRequestFilter(apiAuthenticationCredentials)

object UnhandledExceptionsFilter extends ExceptionFilter[Request](ErrorResponseEncoders.exceptionResponseEncoder)

object @@app@@Api extends ResponseEncoders {
   def @@appLower@@Api = @@api_list@@ //TestApi.testApi() :+: Test2Api.test2Api()

  def apiService: Service[Request, Response] =
    RequestLoggingFilter andThen
    UnhandledExceptionsFilter andThen
    //AuthenticationFilter andThen
    @@appLower@@Api.handle(apiErrorHandler).toService


}
